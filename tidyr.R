library(tidyr)
> #create fictitious dataset
> comp <- c(1,1,1,2,2,2,3,3,3)
> yr <- c(1980,1985,1990,1980,1985,1990,1980,1985,1990)
> q1 <- runif(9, min=0, max=100)
> q2 <- runif(9, min=0, max=100)
> q3 <- runif(9, min=0, max=100)
> q4 <- runif(9, min=0, max=100)
> 
> df <- data.frame(comp=comp,year=yr,Qtr1 = q1,Qtr2 = q2,Qtr3 = q3,Qtr4 = q4)
> df
  comp year      Qtr1       Qtr2     Qtr3     Qtr4
1    1 1980  5.680905 38.3793211 62.09877 17.70219
2    1 1985 10.479641 37.5661478 12.79819 55.79602
3    1 1990 66.260752 45.4223040  5.42342 80.45749
4    2 1980 28.516036 22.6043341 81.47246 70.86212
5    2 1985 39.175342 51.1463117 20.22861 93.56876
6    2 1990 17.721687 23.1239142 48.79784 79.09323
7    3 1980 51.737127  0.6204168 39.14621 34.92079
8    3 1985 22.077204 44.8053845 58.57517 42.01638
9    3 1990 40.833111 95.9762529 97.11392 58.72700
> head(df %>% gather(Quarter,Revenue,Qtr1:Qtr4))
  comp year Quarter   Revenue
1    1 1980    Qtr1  5.680905
2    1 1985    Qtr1 10.479641
3    1 1990    Qtr1 66.260752
4    2 1980    Qtr1 28.516036
5    2 1985    Qtr1 39.175342
6    2 1990    Qtr1 17.721687
> head(gather(df,Quarter,Revenue,Qtr1:Qtr4))
  comp year Quarter   Revenue
1    1 1980    Qtr1  5.680905
2    1 1985    Qtr1 10.479641
3    1 1990    Qtr1 66.260752
4    2 1980    Qtr1 28.516036
5    2 1985    Qtr1 39.175342
6    2 1990    Qtr1 17.721687
> 
> 
> stocks <- data.frame(
+   time = as.Date('2009-01-01') + 0:9,
+   X = rnorm(10, 0, 1),
+   Y = rnorm(10, 0, 2),
+   Z = rnorm(10, 0, 4)
+ )
> stocks
         time           X           Y          Z
1  2009-01-01 -0.22899835  0.33941081 -12.144349
2  2009-01-02  0.31720980 -0.63077193   1.508370
3  2009-01-03  0.06977407  0.14456320  -6.277528
4  2009-01-04  0.27684426 -3.32024419  -1.373150
5  2009-01-05  1.13434221 -0.05307095  -2.322914
6  2009-01-06  1.58130586 -0.07486104  -2.012649
7  2009-01-07 -2.82741352 -0.75968377   5.478559
8  2009-01-08  0.41804796 -1.13005618   5.435718
9  2009-01-09  0.80501831  5.66440511  -4.278769
10 2009-01-10  0.42013330  6.86347223  -3.610809
> 
> 
> stocksm <- stocks %>% gather(stock, price, -time)
> stocksm %>% spread(stock, price)
         time           X           Y          Z
1  2009-01-01 -0.22899835  0.33941081 -12.144349
2  2009-01-02  0.31720980 -0.63077193   1.508370
3  2009-01-03  0.06977407  0.14456320  -6.277528
4  2009-01-04  0.27684426 -3.32024419  -1.373150
5  2009-01-05  1.13434221 -0.05307095  -2.322914
6  2009-01-06  1.58130586 -0.07486104  -2.012649
7  2009-01-07 -2.82741352 -0.75968377   5.478559
8  2009-01-08  0.41804796 -1.13005618   5.435718
9  2009-01-09  0.80501831  5.66440511  -4.278769
10 2009-01-10  0.42013330  6.86347223  -3.610809
> 
> 
> stocksm %>% spread(time, price)
  stock  2009-01-01 2009-01-02  2009-01-03 2009-01-04  2009-01-05  2009-01-06 2009-01-07 2009-01-08 2009-01-09 2009-01-10
1     X  -0.2289983  0.3172098  0.06977407  0.2768443  1.13434221  1.58130586 -2.8274135   0.418048  0.8050183  0.4201333
2     Y   0.3394108 -0.6307719  0.14456320 -3.3202442 -0.05307095 -0.07486104 -0.7596838  -1.130056  5.6644051  6.8634722
3     Z -12.1443491  1.5083699 -6.27752788 -1.3731496 -2.32291418 -2.01264924  5.4785585   5.435718 -4.2787688 -3.6108090
> 
> df <- data.frame(x = c(NA, "a.x", "b.y", "c.z"))
> df
     x
1 <NA>
2  a.x
3  b.y
4  c.z
> 
> 
> df %>% separate(x, c("ABC", "XYZ"))
   ABC  XYZ
1 <NA> <NA>
2    a    x
3    b    y
4    c    z
> 
> head(mtcars)
                   mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
> 
> unite_(mtcars, "vs.am", c("vs","am"),sep = '.') #combine columns
                     mpg cyl  disp  hp drat    wt  qsec vs.am gear carb
Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46   0.1    4    4
Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02   0.1    4    4
Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61   1.1    4    1
Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44   1.0    3    1
Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02   0.0    3    2
Valiant             18.1   6 225.0 105 2.76 3.460 20.22   1.0    3    1
Duster 360          14.3   8 360.0 245 3.21 3.570 15.84   0.0    3    4
Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00   1.0    4    2
Merc 230            22.8   4 140.8  95 3.92 3.150 22.90   1.0    4    2
Merc 280            19.2   6 167.6 123 3.92 3.440 18.30   1.0    4    4
Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90   1.0    4    4
Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40   0.0    3    3
Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60   0.0    3    3
Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00   0.0    3    3
Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98   0.0    3    4
Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82   0.0    3    4
Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42   0.0    3    4
Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47   1.1    4    1
Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52   1.1    4    2
Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90   1.1    4    1
Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01   1.0    3    1
Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87   0.0    3    2
AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30   0.0    3    2
Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41   0.0    3    4
Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05   0.0    3    2
Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90   1.1    4    1
Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70   0.1    5    2
Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90   1.1    5    2
Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50   0.1    5    4
Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50   0.1    5    6
Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60   0.1    5    8
Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60   1.1    4    2
> 
> mtcars %>%
+   unite(vs_am, vs, am) %>%
+   separate(vs_am, c("vs", "am")) #Separate columns
                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
